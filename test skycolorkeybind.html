<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
		<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script>

		<script>
	      	AFRAME.registerComponent('loaded', {
	          init: function () {
	            var el = this.el;
	            el.addEventListener('model-loaded', () => {
	              console.log(el.id+" chargé");
	              });
	            this.el.addEventListener('model-error', () => {
	                // Grab the mesh / scene.
	                console.log("erreur");
	              });
	            }
	      	});

          AFRAME.registerComponent("finished", {
            init: function () {
               this.el.addEventListener("animation-finished" , ( )=> {
                 console.log(">>>> animation terminée");
               });
            },
           }
          );






	    </script>
  </head>

  <body style='margin : 0px; overflow: hidden;'>

		<a-scene renderer="antialias: true;
                   colorManagement: true;
                   sortObjects: true;
                   physicallyCorrectLights: true;
                   maxCanvasWidth: 1920;
                   maxCanvasHeight: 1920;">

			<a-assets>
				<a-asset-item id="rock" src="./models/test.glb"></a-asset-item>

			</a-assets>

			<a-entity
						scale="1 1 1"
						position="0 -0.1 -1"
						rotation="0 -90 -10"
						shadow="cast:true"
            shadow="receive: true"
						loaded
            gltf-model="#rock">
      </a-entity>


			 <a-entity id="camera" position="0 0 0" camera look-controls></a-entity>


		   <a-sky finished;
       color="#030A24" animation="property: components.material.material.color;
     		type: color;
     		to: #030A24;
      	dur: 50;
      	dir: alternate;
      	loop: false";
        switch
        >
      </a-sky>

			 <a-light type="point" intensity="100" color="#3498db" distance="3" position="1 2 -0.8"></a-light>
			 <a-light type="point" intensity="10" color="red" distance="3" position="-1 0.2 -1"></a-light>
			 <a-light type="point" intensity="20" color="orange" distance="3" position="0 1 0"></a-light>
			 <a-entity light="type: ambient; color: #CBB"></a-entity>

    	</a-scene>

      <script src= "animsky.js" ></script>


  </body>
</html>
